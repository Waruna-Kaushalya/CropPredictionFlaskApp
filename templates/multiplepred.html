{%extends "layout.html"%}

{%block content%}

<div class="topnav" id="myTopnav">

    <a href="{{ url_for('home')}}">Single Prediction</a>
    <a href="{{ url_for('multiplepred')}}" class="active">Multiple Prediction</a>
    <a href="{{ url_for('trainmodel')}}">Model Train</a>
    <a href="{{ url_for('about')}}">About</a>

    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
    </a>
</div>


<div class="multiplepred">
    <div class="container">



        <div class="col-md-10">

            <h3>Performing a series of predictions simultaneously</h3>
            <hr>
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            {% if category == 'success' %}
            <div class="alert alert-success mb-3" role="alert">
                <center>
                    {{ message }}
                </center>
            </div>
            {% endif %}

            {% if category == 'error' %}
            <div class="alert alert-danger mb-3" role="alert">
                {{ message }}
            </div>
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endwith%}

                        <!-- waiting -->
                        <center>
                            <div id="loading" style="display:none;"><img src="/static/pics/waiting2.gif" height="200" />
                            </div>
                        </center>
                        <!-- End waiting -->
            
                        <!-- waiting -->
                        <center>
                            <div id="uploading" style="display:none;"><img src="/static/pics/uploading.gif" height="200" />
                            </div>
                        </center>
                        <!-- End waiting -->
        </div>



        <br>
        <div class="container">

            <!--  -->
            <div class="row">
                <div class="form-group">
                    <form action="/csvimport" method="POST" enctype="multipart/form-data">
                        <div class="col-md-3">
                            <label>Choose a file to upload</label>
                            <br>
                            <input type="file" name="file" value="file">
                        </div>

                        <div class="col-md-2">
                            <input type="submit" name="upload" value="Upload" class="btn btn-success btn-block" onclick="$('#uploading').show();">
                            {{msg}}
                        </div>
                    </form>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="form-group">
                    <form id="containerForm" class="form-horizontal" method="POST" action="/predictcsvfile">
                        <div class="col-md-3">
                            <label>Make the prediction</label>
                        </div>

                        <div class="col-md-2">
                            <input class='btn btn-primary btn-block' type='submit' value='Train model' onclick="$('#loading').show();">
                            {{modelTrain}}
                        </div>
                    </form>
                </div>
            </div>
            <hr>

            <div class="row">
                <div class="form-group">
                    <form action="/showcsvtables" method="POST" enctype="multipart/form-data">
                        <div class="col-md-3">
                            <label>Get the result of prediction</label>
                        </div>

                        <div class="col-md-2">
                            <input type='submit' value='Show result' name="upload" class="btn btn-success btn-block">
                            {{showMsg}}
                        </div>
                    </form>
                </div>
            </div>
            <br>
            <label>Result of prediction</label>
            <br>
            <br>
            {% for table in tables %}
            {{titles[loop.index]}}
            {{ table|safe }}
            {% endfor %}


        </div>
    </div>
</div>

{%endblock%}